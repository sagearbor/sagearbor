name: GitHub Code Analyzer
on:
  schedule:
    - cron: '0 0 * * *' # Runs daily at midnight
  workflow_dispatch: # Allows manual trigger from Actions tab

jobs:
  analyze-code:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout profile repository
        uses: actions/checkout@v4

      - name: Run GitHub Code Analyzer
        uses: arhamkhnz/github-code-analyzer@main # Changed from @v1 to @main
        with:
          GITHUB_TOKEN: ${{ secrets.PERSONAL_ACCESS_TOKEN }}
          # Create a PAT (classic) with 'repo' scope to include private repos
